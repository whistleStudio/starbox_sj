# 模拟公交卡计费

[[toc]]

<br>
<br>

## 🎯 项目目标

理解射频识别技术的工作原理，掌握利用射频识别模块模拟公交车卡的充值和扣费过程，学会通过编程实现公交卡的充值与扣费操作。

<br>
<br>

## 📖 原理方法

射频识别技术通过射频信号识别目标对象并获取相关信息。电子标签具有唯一的电子编码，用来承载所标识物体的信息。读写器通过无线射频信号识别特定目标，与电子标签进行双向数据传输。

<br>
<br>

## 🕹️ 编程实践

### 1）射频RFID测试

<a href="/tutorial/starbox_sj/sb3/射频RFID测试.sb3">点击下载程序：射频RFID测试.sb3</a>

屏显设别到的射频卡ID值。

*注意：*
- *射频识别模块在未检测到有效信息时，返回数字0；*
- *将射频卡贴近读取模块时，返回卡片对应ID值，但有且仅有一次，随后置0；如需再次读取ID值，需将射频卡远离读取模块(离开检测范围)后再贴近。*

<img src="/images/docimg/Snipaste_2025-03-04_09-20-02.png">

<br>
<br>

### 2）单公交卡计费

<a href="/tutorial/starbox_sj/sb3/单公交卡计费.sb3">点击下载程序：单公交卡计费.sb3</a>

实现单张公交卡的充值或扣费功能

- 程序开始运行后，持续检测，直至读取到待操作的RFID卡号；
- 记录卡号后，按下红色按钮进行充值；
- 记录卡号后，按下绿色按钮进行扣费。
<img src="/images/docimg/Snipaste_2025-03-04_12-42-32.png">

<img src="/images/docimg/Snipaste_2025-03-04_12-43-49.png">

余额初始为0，每完成一次充值，增加100。

执行扣费操作时，若余额＜20，提示扣费失败；否则，余额减少20。

*注意：为更易进行操作演示，每次扣费步长选取20，与教材略有不同。*

<img src="/images/docimg/Snipaste_2025-03-04_12-44-46.png">

<br>
<br>

## 📺 演示视频

(催更中🔥🔥🔥)